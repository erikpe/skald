extern fn print_i64(x: i64) -> unit;
extern fn print_bool(x: bool) -> unit;
extern fn malloc_u64(size: u64) -> *u8;
extern fn free_ptr(p: *u8) -> unit;

fn main() -> i64 {
  // Raw pointer allocation and byte indexing.
  var p: *u8 = malloc_u64(4);
  if p == null {
    return 1;
  }
  defer free_ptr(p);

  p[0] = 7;
  p[1] = 8;
  p[2] = 9;
  p[3] = 255;

  // Compare against integer literals to validate u8 reads.
  print_bool(p[0] == 7);
  print_bool(p[1] == 8);
  print_bool(p[2] == 9);
  print_bool(p[3] == 255);

  return 0;
}
